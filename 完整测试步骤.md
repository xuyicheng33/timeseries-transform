# 完整测试步骤（从登录开始）

本文用于对平台进行端到端功能测试，覆盖：登录/注册、数据中心、配置向导、模型模板、结果仓库、可视化对比、高级分析、实验管理等全部页面功能。

---

## 0. 测试准备

### 0.1 环境与服务

1. 确认前后端服务可访问（本地或服务器）。
2. 如使用 Docker Compose，确保容器均为 `Up` 且前端健康检查正常。

### 0.2 测试账号

准备两类账号以覆盖权限场景：

- 账号 A：普通用户（数据集所有者）
- 账号 B：普通用户（用于测试“他人资源不可编辑/不可上传结果”等）
-（可选）管理员账号：用于测试管理员操作（如系统模板、权限绕过等）

### 0.3 测试数据文件（建议使用仓库内 test_datasets）

数据集 CSV：

- `test_datasets/stock_v2.csv`（500 行）
- `test_datasets/sensor_v2.csv`（5000 行）
- `test_datasets/weather_v2.csv`（8760 行）
- `test_datasets/large_scale_v2.csv`（50000 行）
-（可选）`test_datasets/missing_values_v2.csv`（用于缺失值检测）

预测结果 CSV（由脚本生成，默认目录示例）：

- `test_datasets/prediction_results_generated/<timestamp>/result_stock_LSTM_v1.0_high.csv`（完整格式）
- `test_datasets/prediction_results_generated/<timestamp>/result_stock_LSTM_pred_only.csv`（仅 predicted_value）
- `test_datasets/prediction_results_generated/<timestamp>/result_stock_LSTM_pred_only_wrong_rows.csv`（仅 predicted_value，300 行）
- `test_datasets/prediction_results_generated/<timestamp>/result_weather_LSTM_with_features.csv`（含特征列）
- `test_datasets/prediction_results_generated/<timestamp>/result_random_prediction.csv`（负 R²）
- `test_datasets/prediction_results_generated/<timestamp>/result_large_scale.csv`（50000 行）

---

## 1. 登录与注册

### 1.1 注册（可选）

操作：
1. 打开注册页 `/register`
2. 输入用户名/邮箱/密码并提交

预期结果：
- 注册成功后能跳转到登录页或自动登录进入系统
- 若邮箱/用户名已存在，应提示错误

### 1.2 登录

操作：
1. 打开登录页 `/login`
2. 使用账号 A 登录

预期结果：
- 登录成功，跳转到数据中心 `/datasets`
- 刷新页面仍保持登录态（Token/Session 生效）
- 登录失败（密码错误）应提示错误且不跳转

---

## 2. 数据中心（`/datasets`）

### 2.1 上传数据集

操作（分别上传 4 个文件）：
1. 点击“上传数据集”
2. 选择 `stock_v2.csv`，填写名称（如：`stock_v2`），提交
3. 依次上传 `sensor_v2.csv`、`weather_v2.csv`、`large_scale_v2.csv`

预期结果：
- 上传成功，列表出现新数据集，显示行数/列数/文件大小等
- `stock_v2.csv` 行数显示约 500；`large_scale_v2.csv` 行数显示约 50000
- 上传过程中若文件过大或格式错误，应有明确提示

### 2.2 数据集预览

操作：
1. 在数据集列表中点击某数据集的“预览”

预期结果：
- 表格显示前 100 行
- 列名正确展示

### 2.3 数据质量检测

操作：
1. 点击数据集的“质量检测”

预期结果（常见项）：
- 显示概览信息（行数、列数、重复行、质量评分等）
- 缺失值分析：能看到每列缺失数量/缺失率
- 异常值检测：能切换检测方法（IQR、Z-Score、MAD、Percentile、Threshold 等，如页面提供）
- 列统计信息：均值/标准差/分位数等可见
-（若包含时间列）时序分析：识别时间范围与频率

建议用例：
- 对 `missing_values_v2.csv` 进行缺失值分析，缺失率应明显高于普通数据集

### 2.4 数据清洗（在质量检测基础上）

操作：
1. 在质量检测面板点击“数据清洗”
2. 分别测试：
   - 缺失值：删除行 / 均值填充 / 前向填充
   - 异常值：删除 / Clip / 替换均值
   - 重复行：删除重复行
3. 选择“覆盖原数据集”与“创建新数据集”两种模式各测试一次

预期结果：
- 预览能展示清洗前后变化
- 创建新数据集时：列表出现新条目且名称带后缀（或按你输入）
- 覆盖原数据集时：原数据集行数/统计信息随清洗变化

### 2.5 数据下载

操作：
1. 对任意数据集点击“下载”

预期结果：
- 下载成功，文件名与数据集一致或可识别

### 2.6 删除数据集

操作：
1. 选择一个测试数据集点击“删除”，确认

预期结果：
- 删除成功，列表移除
- 若该数据集已有关联配置/结果，系统应阻止删除或提示关联影响（按产品实际）

### 2.7 批量操作（如页面提供）

操作：
1. 勾选多个数据集
2. 测试批量删除/批量导出（若有）

预期结果：
- 批量删除：有确认弹窗，删除后列表更新
- 批量导出：下载 ZIP，包含选中数据集（以及产品定义的配置/结果）

---

## 3. 配置向导（`/configurations`）

### 3.1 创建配置（7 步向导）

操作：
1. 打开配置向导页，点击“创建配置”
2. 第 1 步：选择数据集（如 `stock_v2`）
3. 第 2 步：选择通道（至少 1 个列）
4. 第 3 步：归一化配置（分别测试以下典型值）
   - None
   - MinMax
   - Z-Score
   - Robust / Quantile（如需覆盖更多）
5. 第 4 步：异常注入（可选）
   - 打开“启用异常注入”
   - 异常类型：分别选择 `软替换 / 均匀替换 / 峰值噪声 / 长度调整`
   - 注入算法：分别选择 `按窗口 / 按序列`
   -（注意）当前 UI 不展示“序列逻辑”，无需选择
6. 第 5 步：窗口参数
   - 窗口大小、步长
   - 目标类型：`next` / `kstep` / `reconstruct`
7. 第 6 步：模型模板（可选）
8. 第 7 步：预览确认并创建

预期结果：
- 每一步必填项未填会提示
- 预览页能显示你选中的数据集、通道、归一化、异常注入（两项）、窗口参数、目标类型
- 创建成功后，配置列表出现新配置
- 文件名生成逻辑能正常返回（生成标准文件名不为空）

### 3.2 配置列表管理

操作：
1. 编辑配置名称/描述（如支持）
2. 复制配置（如支持）
3. 删除配置

预期结果：
- 列表更新及时
- 删除有确认提示，删除后不可再在下拉中选到

---

## 4. 模型模板（`/model-templates`）

### 4.1 列表与搜索

操作：
1. 打开模型模板页
2. 使用搜索框/筛选项（类别、任务类型等）进行筛选

预期结果：
- 列表随筛选更新
- 空结果显示 Empty 状态

### 4.2 创建模板

操作：
1. 点击“新建模板”
2. 填写名称、版本、类别、描述、常用超参数（按页面字段）
3. 保存

预期结果：
- 创建成功后列表出现新模板
- 打开详情能看到填写内容一致

### 4.3 编辑、复制、删除模板

操作：
1. 编辑模板并保存
2. 复制模板（若有）
3. 删除模板

预期结果：
- 修改后详情与列表同步
- 删除后列表移除

### 4.4 初始化预置模板（如有按钮）

操作：
1. 点击“初始化预置模板”

预期结果：
- 系统模板出现或提示已存在

---

## 5. 结果仓库（`/results`）

### 5.1 上传结果（完整格式：true_value + predicted_value）

操作：
1. 打开结果仓库页，点击“上传结果”
2. 选择数据集：`stock_v2`
3. 上传文件：`result_stock_LSTM_v1.0_high.csv`
4. 填写结果名称、模型名称/版本（按页面字段）
5. 提交

预期结果：
- 上传成功，结果列表出现新结果
- 指标自动计算（MSE/RMSE/MAE/R²/MAPE 等，按产品）

### 5.2 上传结果（仅 predicted_value）

操作：
1. 上传 `result_stock_LSTM_pred_only.csv`
2. 选择对应数据集与目标列（如果页面要求）

预期结果：
- 上传成功
- 系统从数据集目标列获取真实值并计算指标

### 5.3 上传失败用例：行数不匹配

操作：
1. 上传 `result_stock_LSTM_pred_only_wrong_rows.csv`

预期结果：
- 上传失败
- 明确提示行数不匹配（或类似错误信息）

### 5.4 上传失败用例：NaN/非数值（如需）

操作：
1. 准备一个包含 NaN 或非数值的结果文件（可手工编辑 CSV）
2. 上传

预期结果：
- 上传失败并提示数据包含 NaN 或无效值（按后端实际校验）

### 5.5 结果预览

操作：
1. 在结果列表点击“预览”

预期结果：
- 弹窗显示前 100 行（或页面定义的行数）
- 列展示与文件一致（pred-only 文件只显示 predicted_value）

### 5.6 指标详情

操作：
1. 点击“指标详情”

预期结果：
- 展示 MSE/RMSE/MAE/R²/MAPE 等
- 数值与上传文件的质量水平一致（高/中/低有明显差异）

### 5.7 结果编辑与删除

操作：
1. 编辑结果名称/描述/模型信息（如支持）
2. 删除结果

预期结果：
- 编辑后列表与详情同步
- 删除后列表移除

### 5.8 结果下载

操作：
1. 点击“下载结果”

预期结果：
- 下载成功，文件可打开

### 5.9 筛选与分页

操作：
1. 按数据集筛选
2. 按模型名筛选
3. 切换分页

预期结果：
- 筛选条件生效、分页正确

---

## 6. 可视化对比（`/visualization`）

### 6.1 选择结果并对比曲线

操作：
1. 进入可视化对比页
2. 选择同一数据集下的 3~5 个结果（建议用同一 dataset 的 high/medium/low）

预期结果：
- 显示真实曲线（True）与多条预测曲线（Pred）
- 曲线颜色区分明显，图例可切换显示/隐藏

### 6.2 指标表与综合排名

操作：
1. 查看指标表
2. 观察综合排名/最优标记（如有）

预期结果：
- high 的 R² 明显高于 low
- 指标排序与预期一致（R² 越高越好，误差越低越好）

### 6.3 降采样与大数据性能

操作：
1. 使用 `result_large_scale.csv`（50000 行）进行可视化
2. 切换降采样算法（LTTB/MinMax/Average）
3. 调整最大点数滑条（如有）

预期结果：
- 页面不卡死，加载有进度或 loading
- 不同算法曲线形态有所差异但总体趋势一致

### 6.4 误差分析

操作：
1. 切换到误差分析 Tab
2. 查看残差时序图、误差分布直方图（如有）

预期结果：
- 误差统计随模型质量变化（low 明显更差）
- 直方图 bin 边界一致（如产品如此设计）

### 6.5 雷达图与区间分析（如有）

操作：
1. 查看雷达图
2. 输入区间并计算区间指标

预期结果：
- 雷达图维度完整显示
- 区间无效输入（start > end）有提示

### 6.6 配置对比（ConfigComparison 组件）

操作：
1. 选择多个结果
2. 查看配置差异与敏感性分析（若有）

预期结果：
- 显示参数差异
- 若缺少配置关联，应提示并跳过该结果（按产品）

---

## 7. 高级分析（`/advanced-viz`）

### 7.1 置信区间

操作：
1. 选择一个结果
2. 查看置信区间图
3. 调整置信水平（如有）

预期结果：
- 区间随置信水平变化（90% 更窄，95% 更宽）

### 7.2 特征重要性

操作：
1. 选择 `result_weather_LSTM_with_features.csv` 对应上传后的结果（需先上传到结果仓库）
2. 打开特征重要性 Tab

预期结果：
- 能展示特征列表与权重
- 若结果不含特征列，应提示不可用或空状态

### 7.3 预测分解（如有）

操作：
1. 查看预测分解图（趋势/季节/残差等）

预期结果：
- 图表可渲染并与数据长度匹配

---

## 8. 实验管理（`/experiments`）

### 8.1 创建实验组

操作：
1. 点击“创建实验组”
2. 填写名称、描述、标签（如有）
3. 创建

预期结果：
- 列表出现新实验组，状态为草稿/默认状态

### 8.2 添加结果到实验组

操作：
1. 打开实验组详情
2. 点击“添加结果”
3. 勾选多个结果添加

预期结果：
- 实验组包含的结果数量增加
- 详情页能显示每个结果的关键指标

### 8.3 实验组汇总与报告

操作：
1. 打开实验组汇总（summary）
2. 生成报告（如有 ReportGenerator）
3. 导出实验组（如支持导出 ZIP）并下载

预期结果：
- 汇总信息正确（最好/最差模型清晰）
- 导出成功，下载文件可解压

### 8.4 编辑/删除实验组

操作：
1. 编辑实验组名称/状态
2. 删除实验组

预期结果：
- 列表同步更新
- 删除有确认提示

---

## 9. 权限与异常场景（建议覆盖）

### 9.1 他人资源不可编辑

操作：
1. 账号 A 创建数据集/结果
2. 退出登录，账号 B 登录
3. 尝试编辑/删除账号 A 的私有资源

预期结果：
- 不能编辑/删除，应提示无权限

### 9.2 上传结果权限

操作：
1. 账号 B 选择账号 A 的数据集（若公开可见）
2. 尝试上传结果到该数据集

预期结果：
- 若产品限制“只有所有者/管理员可上传”，应失败并提示无权限

---

## 10. 回归检查清单（每次发版建议）

- 登录/注册是否正常
- 上传 4 个数据集是否正常（含大文件）
- 配置向导每一步是否可通过（含异常注入两项）
- 上传结果（完整/仅预测值/行数不匹配）是否符合预期
- 可视化对比页面是否能正确渲染与切换 Tab
- 高级分析页是否可打开且组件不报错
- 实验管理是否可创建/添加结果/导出

